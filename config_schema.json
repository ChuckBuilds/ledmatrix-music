{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "Music Player Plugin Configuration",
  "description": "Configuration schema for the music player plugin supporting Spotify and YouTube Music",
  "properties": {
    "enabled": {
      "type": "boolean",
      "description": "Enable or disable the music player plugin",
      "default": true
    },
    "display_duration": {
      "type": "number",
      "description": "How long to show the music display (10-300 seconds)",
      "minimum": 10,
      "maximum": 300,
      "default": 30
    },
    "preferred_source": {
      "type": "string",
      "description": "Preferred music source",
      "enum": ["spotify", "ytm"],
      "default": "spotify",
      "ui:widget": "radio",
      "x-widget": "select"
    },
    "polling_interval_seconds": {
      "type": "number",
      "description": "Polling interval for Spotify in seconds",
      "minimum": 1,
      "maximum": 60,
      "default": 2
    },
    "ytm_companion_url": {
      "type": "string",
      "description": "YouTube Music Companion server URL",
      "default": "http://localhost:9863",
      "pattern": "^https?://.*"
    },
    "music_priority_mode": {
      "type": "boolean",
      "description": "Enable music priority mode - when music is playing, it takes over the display",
      "default": false
    },
          "nothing_playing_timeout_seconds": {
            "type": "integer",
            "description": "When in priority mode, exit back to rotation if 'Nothing Playing' persists this long",
            "minimum": 5,
            "default": 10
          },
    "priority_duration_seconds": {
      "type": "integer",
      "description": "How long (in seconds) to show music when it starts playing in priority mode",
      "minimum": 10,
      "default": 30
    },
    "text_scrolling": {
      "type": "object",
      "description": "Fine-grained control over text scrolling behavior",
      "properties": {
        "title": {
          "type": "object",
          "description": "Title scrolling settings",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable scrolling for track title",
              "default": true
            },
            "speed": {
              "type": "integer",
              "description": "Scroll speed divisor (higher = slower, lower = faster). Controls how many frames between each character scroll. Range: 1-20",
              "minimum": 1,
              "maximum": 20,
              "default": 5
            },
            "separator": {
              "type": "string",
              "description": "Text separator between wrapped text (e.g., '   ' for 3 spaces, ' | ' for pipe)",
              "default": "   ",
              "maxLength": 10
            },
            "initial_pause_frames": {
              "type": "integer",
              "description": "Number of frames to pause before starting scroll (0 = no pause)",
              "minimum": 0,
              "maximum": 300,
              "default": 0
            },
            "end_pause_frames": {
              "type": "integer",
              "description": "Number of frames to pause at end before wrapping (0 = no pause)",
              "minimum": 0,
              "maximum": 300,
              "default": 0
            }
          },
          "default": {}
        },
        "artist": {
          "type": "object",
          "description": "Artist scrolling settings",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable scrolling for artist name",
              "default": true
            },
            "speed": {
              "type": "integer",
              "description": "Scroll speed divisor (higher = slower, lower = faster). Controls how many frames between each character scroll. Range: 1-20",
              "minimum": 1,
              "maximum": 20,
              "default": 5
            },
            "separator": {
              "type": "string",
              "description": "Text separator between wrapped text (e.g., '   ' for 3 spaces, ' | ' for pipe)",
              "default": "   ",
              "maxLength": 10
            },
            "initial_pause_frames": {
              "type": "integer",
              "description": "Number of frames to pause before starting scroll (0 = no pause)",
              "minimum": 0,
              "maximum": 300,
              "default": 0
            },
            "end_pause_frames": {
              "type": "integer",
              "description": "Number of frames to pause at end before wrapping (0 = no pause)",
              "minimum": 0,
              "maximum": 300,
              "default": 0
            }
          },
          "default": {}
        },
        "album": {
          "type": "object",
          "description": "Album scrolling settings",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable scrolling for album name",
              "default": true
            },
            "speed": {
              "type": "integer",
              "description": "Scroll speed divisor (higher = slower, lower = faster). Controls how many frames between each character scroll. Range: 1-20",
              "minimum": 1,
              "maximum": 20,
              "default": 5
            },
            "separator": {
              "type": "string",
              "description": "Text separator between wrapped text (e.g., '   ' for 3 spaces, ' | ' for pipe)",
              "default": "   ",
              "maxLength": 10
            },
            "initial_pause_frames": {
              "type": "integer",
              "description": "Number of frames to pause before starting scroll (0 = no pause)",
              "minimum": 0,
              "maximum": 300,
              "default": 0
            },
            "end_pause_frames": {
              "type": "integer",
              "description": "Number of frames to pause at end before wrapping (0 = no pause)",
              "minimum": 0,
              "maximum": 300,
              "default": 0
            }
          },
          "default": {}
        }
      },
      "default": {}
    }
  },
  "required": ["enabled", "preferred_source"],
  "additionalProperties": false
}
